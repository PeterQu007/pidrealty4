{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/createClass.js","webpack:///./src/CMA.js","webpack:///./src/CanvasImage.js","webpack:///./src/PIDChart.js","webpack:///./src/SubMarkets.js","webpack:///./src/index.js"],"names":["WPDataTable","table","cmaType","tableID","$j","attr","is_mobile","css","pathArray","window","location","pathname","split","lastItem","pop","events","evaluateButton1","evaluateButton2","startOver","evaluateSoldButton1","evaluateSoldButton2","startOverSold","config","attributes","childList","subtree","callback","mutationsList","observer","mutation","type","disconnect","setTimeout","get_aggregates","table_events","evaluateByMarketPrice","evaluateByBCAChange","MutationObserver","observe","rows","querySelectorAll","forEach","row","addEventListener","e","target","parentNode","toggleClass","colTotalPrice","colPricePerSF","colBCAChange","colBCALandValuePSF","colBCAHouseValuePSF","colBCATotalValuePSF","setSummaryCMACell","xTD","length","addClass","buttonEvaluate","click","maxPricePFCellLabel","avgPricePFCellLabel","minPricePFCellLabel","maxImprovePricePFCellLabel","avgImprovePricePFCellLabel","minImprovePricePFCellLabel","avgBCAChangePercentageCellLabel","floorAreaCellLabel","landSizeCellLabel","bcaTotalValueCellLabel","maxPrice","avgPrice","minPrice","maxImprovePrice","avgImprovePrice","minImprovePrice","maxPricePF","parseFloat","text","trim","replace","avgPricePF","minPricePF","maxImprovePricePF","avgImprovePricePF","minImprovePricePF","floorArea","landSize","bcaTotalValue","avgBCAChangePercentage","cmaMaxPrice","cmaAvgPrice","cmaMinPrice","formatter","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","toFixed","rangeMax","subjectPrice","parseInt","rangeSubjectVal","rangeAvg","canvasNo","drawValuePriceRationGauge","maxPricePSFCellLabel","avgPricePSFCellLabel","minPricePSFCellLabel","cmaMaxPriceCellLabel","cmaAvgPriceCellLabel","cmaMinPriceCellLabel","resetCMAResult","resetGauge","cmaMaxPrice2","cmaAvgPrice2","cmaMinPrice2","min","avg","max","val","gaugeColor","opts","angle","lineWidth","radiusScale","pointer","strokeWidth","color","limitMax","limitMin","colorStart","colorStop","strokeColor","generateGradient","highDpiSupport","document","getElementById","chartContext","getContext","width","height","clearRect","gauge","Gauge","setOptions","maxValue","setMinValue","animationSpeed","set","aggregateType","aggregateNameColumn","xTableHeading2","xTables","next","find","xTable","aggr_price_cell","aggr_price","innerText","toLowerCase","cell_id","pid_aggr_cell","toLocaleString","htmlCityNameCN","CanvasImage","canvasID","marketSection","btnDraw","drawingContainer","chartType","updateChartCommunities","chartCanvasID","drawCanvas","propertyTypeSelect","chartTypeSelect","monthSelect","YearSelect","shareButtonLabel","propertyTitle","propertyThumbnail","descriptionTextLength","descriptionTextLabel","socialDefaultConfig","title","image","description","ui","flyout","hasClass","networks","email","href","postID","RegisterSocialButtons","call","jQuery","$","socialShare","Share","JSON","parse","stringify","share_button","share_icon","on","preventDefault","url","indexOf","toggle","postCanvasToURL","pid","newConfig","pid_Data","siteurl","twitter","facebook","subTitle","language","chartCommunities","join","img64","toDataURL","console","log","img","createElement","src","classList","add","oldImg","querySelector","remove","append","uploadImage","html2canvas","allowTaint","then","canvas","nbhSection","nbhNames","nbhNames_tmp","theLabel","nbhSelected","nbhCodes","i","nbhSelect","nbhCode","nbhName","Object","values","uploadUrl","file_data","dataURItoBlob","imageFile","File","rads","propertyDescription","rad","checked","value","labels","chartDescription","radsChartType","form_data","FormData","PropertyType","Years","ChartType","Communities","ajax","dataType","cache","contentType","processData","data","success","php_script_response","theBlob","fileName","lastModifiedDate","Date","name","dataURI","byteString","atob","unescape","mimeString","ia","Uint8Array","charCodeAt","Blob","pidChart","vw","getElementsByClassName","getBoundingClientRect","vh","activeClass","nonActiveClass","Month","nbhLabel","canvasImage","htmlShareLink","htmlShareInput","chartColors2","PropertyTypeSelect","yearArray","Array","from","y","push","MonthSelect","ChartTypeSelect","LocationForm","Locations","inputLabels","getElementsByTagName","activeLocation","filter","element","index","activeIndex","neighborhoodCodes","neighborhoodNames","prepareCanvas","configChart","getChartData","subMarketContainer","removeClass","filterText","node","paramDwell","buildShareLink","updateChart","checkboxes","chkBoxes","paramYears","slice","className","inputID","trigger","getChartData_Compare","getAttribute","parentElement","label","subMarkets","SubMarkets","inputLabel","subInputID","labelClass","objNbhName","subMarketLabel","labelExisted","subMarketInput","labelContainer","thisLabel","msg","inputs","thisInput","chartDataSets_All","chartDataSets_Detached","chartDataSets_Townhouse","chartDataSets_Apartment","chartDataSets_GroupByNbh","chartConfig","chartCanvas","canvasContainer","canvasNew","hidden","ctx","ctxHeight","chartLines","options","legend","maxSize","dataSets","colors","self","codes","chartDataSets","fill","backgroundColor","borderColor","defaultOptions","global","defaultFontFamily","datasets","display","position","fontFamily","responsive","maintainAspectRatio","tooltips","mode","intersect","plugins","crosshair","line","sync","enabled","group","suppressTooltips","zoom","zoomboxBackgroundColor","zoomboxBorderColor","zoomButtonText","zoomButtonClass","callbacks","beforeZoom","start","end","afterZoom","chart6","generate","update","hover","scales","xAxes","time","unit","displayFormats","quarter","yAxes","scaleLabel","labelString","ticks","newValue","defaults","firstNbh","nbhSet","map","chart","dataset","dataSet","paramName","paramValue","shareLink","shareLinkRegex","dwellRegex","chartRegex","yearRegex","monthRegex","mainShareLink","test","match","paramChart","paramYear","paramMonth","newMainShareLink","years","month","chartDataUrl","method","Neighborhood_IDs","res","xPropertyType","xData","yNeighborhood","yData","chkGroupByNbh","thisNbh","radValue","radChecked","prepareCanvasSize","drawChart","origAfterFit","Chart","Legend","prototype","afterFit","undefined","Math","minSize","elements","labelID","btnCloseContainerHtml","btnCloseContainer","formContainer","btnClose","containerID","htmlLabels","htmlInputs","ready","chart1","chart2","chart3","tableHeadings","wpDTs","tableHeading","id","tables","nextElementSibling"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","class WPDataTable {\r\n  constructor(table, cmaType) {\r\n    this.table = table;\r\n    this.cmaType = cmaType;\r\n    this.tableID = $j(table).attr('data-wpdatatable_id');\r\n    let is_mobile = false;\r\n    if ($j('#pid-mobile').css('display') == 'none') {\r\n      is_mobile = true;\r\n    }\r\n    this.is_mobile = is_mobile;\r\n    let pathArray = window.location.pathname.split(\"/\");\r\n    let lastItem = pathArray.pop();\r\n    if (lastItem == \"\") {\r\n      lastItem = pathArray.pop();\r\n    }\r\n    if (lastItem != \"cn\") {\r\n      this.events();\r\n    }\r\n    switch (this.cmaType) {\r\n      case \"active\": //attached\r\n        this.evaluateButton1();\r\n        this.evaluateButton2();\r\n        this.startOver();\r\n        break;\r\n      case \"sold\": //detached\r\n        this.evaluateSoldButton1();\r\n        this.evaluateSoldButton2();\r\n        this.startOverSold();\r\n        break;\r\n    }\r\n  }\r\n\r\n  // events\r\n\r\n  events() {\r\n    const config = { attributes: false, childList: true, subtree: true };\r\n\r\n    const callback = (mutationsList, observer) => {\r\n      for (let mutation of mutationsList) {\r\n        if (mutation.type === \"childList\") {\r\n          observer.disconnect();\r\n          setTimeout(() => {\r\n            this.get_aggregates();\r\n            this.table_events();\r\n            setTimeout(() => {\r\n              this.evaluateByMarketPrice('active');\r\n              this.evaluateByBCAChange('active');\r\n              this.evaluateByMarketPrice('sold');\r\n              this.evaluateByBCAChange('sold');\r\n            }, 2000)\r\n          }, 5000);\r\n          break;\r\n        }\r\n      }\r\n    };\r\n\r\n    const observer = new MutationObserver(callback);\r\n    observer.observe(this.table, config);\r\n  }\r\n\r\n  table_events() {\r\n    let rows = this.table.querySelectorAll('tr');\r\n    rows.forEach(row => row.addEventListener('click', (e) => {\r\n      // console.log(e);\r\n      let row = $j(e.target.parentNode);\r\n      row.toggleClass('pid_clicked_table_row');\r\n    }))\r\n  }\r\n\r\n  get_aggregates() {\r\n    let colTotalPrice = 3;\r\n    let colPricePerSF = 6;\r\n    let colBCAChange = 4;\r\n    let colBCALandValuePSF = 9;\r\n    let colBCAHouseValuePSF = 10;\r\n    let colBCATotalValuePSF = 11;\r\n    switch (this.tableID) {\r\n      case \"34\":\r\n        colTotalPrice = 4;\r\n        colPricePerSF = 6;\r\n        colBCAChange = 5;\r\n        this.setSummaryCMACell(34, \"max\", 4, this.cmaType); // total price\r\n        this.setSummaryCMACell(34, \"min\", 4, this.cmaType);\r\n        this.setSummaryCMACell(34, \"avg\", 4, this.cmaType);\r\n\r\n        this.setSummaryCMACell(34, \"max\", 6, this.cmaType); // price per sf\r\n        this.setSummaryCMACell(34, \"min\", 6, this.cmaType);\r\n        this.setSummaryCMACell(34, \"avg\", 6, this.cmaType);\r\n\r\n        this.setSummaryCMACell(34, \"max\", 5, this.cmaType); // bca change\r\n        this.setSummaryCMACell(34, \"min\", 5, this.cmaType);\r\n        this.setSummaryCMACell(34, \"avg\", 5, this.cmaType);\r\n        break;\r\n      case \"35\":\r\n        colBCAChange = this.is_mobile ? 3 : 4;\r\n        colBCALandValuePSF = this.is_mobile ? 7 : 11;\r\n        colBCAHouseValuePSF = this.is_mobile ? 8 : 12;\r\n        this.setSummaryCMACell(35, \"max\", colBCAChange, this.cmaType); // BCA Change\r\n        this.setSummaryCMACell(35, \"min\", colBCAChange, this.cmaType);\r\n        this.setSummaryCMACell(35, \"avg\", colBCAChange, this.cmaType);\r\n\r\n        this.setSummaryCMACell(35, \"max\", colBCALandValuePSF, this.cmaType); // BCA Land Value per sqft\r\n        this.setSummaryCMACell(35, \"min\", colBCALandValuePSF, this.cmaType);\r\n        this.setSummaryCMACell(35, \"avg\", colBCALandValuePSF, this.cmaType);\r\n\r\n        this.setSummaryCMACell(35, \"max\", colBCAHouseValuePSF, this.cmaType); // BCA Land Value per sqft\r\n        this.setSummaryCMACell(35, \"min\", colBCAHouseValuePSF, this.cmaType);\r\n        this.setSummaryCMACell(35, \"avg\", colBCAHouseValuePSF, this.cmaType);\r\n    }\r\n\r\n    // Check if need to hide Chinese Columns\r\n    let xTD = $j('td[data-column_header=\"City_Name_CN\"]');\r\n\r\n    if (xTD.length > 0) {\r\n      xTD.addClass(\"pid_wpdatatable_hidden_column\");\r\n    }\r\n  }\r\n\r\n  evaluateButton1() {\r\n    // PER Active Listings\r\n    let buttonEvaluate = $j(\"#pid_cma_evaluate_submit\");\r\n    buttonEvaluate.click((e) => {\r\n      this.evaluateByMarketPrice('active');\r\n    })\r\n  }\r\n\r\n  evaluateByMarketPrice(cmaType) {\r\n    let maxPricePFCellLabel = this.tableID == 34 ? `#pid_cma_${cmaType}_price_per_square_feet_max` : `#pid_cma_${cmaType}_land_price_per_square_feet_max`;\r\n    let avgPricePFCellLabel = this.tableID == 34 ? `#pid_cma_${cmaType}_price_per_square_feet_avg` : `#pid_cma_${cmaType}_land_price_per_square_feet_avg`;\r\n    let minPricePFCellLabel = this.tableID == 34 ? `#pid_cma_${cmaType}_price_per_square_feet_min` : `#pid_cma_${cmaType}_land_price_per_square_feet_min`;\r\n\r\n    let maxImprovePricePFCellLabel = this.tableID == 34 ? `#pid_cma_${cmaType}_price_per_square_feet_max` : `#pid_cma_${cmaType}_improve_price_per_square_feet_max`;\r\n    let avgImprovePricePFCellLabel = this.tableID == 34 ? `#pid_cma_${cmaType}_price_per_square_feet_avg` : `#pid_cma_${cmaType}_improve_price_per_square_feet_avg`;\r\n    let minImprovePricePFCellLabel = this.tableID == 34 ? `#pid_cma_${cmaType}_price_per_square_feet_min` : `#pid_cma_${cmaType}_improve_price_per_square_feet_min`;\r\n\r\n    let avgBCAChangePercentageCellLabel = this.tableID == 34 ? \"\" : `#pid_cma_${cmaType}_bca_change_perc_avg`;\r\n\r\n    let floorAreaCellLabel = \"#pid_cma_total_floor_area\";\r\n    let landSizeCellLabel = \"#pid_cma_total_land_size\";\r\n    let bcaTotalValueCellLabel = \"#pid_cma_bca_total_value\";\r\n\r\n    let maxPrice = 0;\r\n    let avgPrice = 0;\r\n    let minPrice = 0;\r\n\r\n    let maxImprovePrice = 0;\r\n    let avgImprovePrice = 0;\r\n    let minImprovePrice = 0;\r\n\r\n    let maxPricePF = parseFloat(\r\n      $j(maxPricePFCellLabel)\r\n        .text()\r\n        .trim()\r\n        .replace(\"$\", \"\")\r\n        .replace(\",\", \"\")\r\n        .replace(\"%\", \"\")\r\n    );\r\n    let avgPricePF = parseFloat(\r\n      $j(avgPricePFCellLabel)\r\n        .text()\r\n        .trim()\r\n        .replace(\"$\", \"\")\r\n        .replace(\",\", \"\")\r\n        .replace(\"%\", \"\")\r\n    );\r\n    let minPricePF = parseFloat(\r\n      $j(minPricePFCellLabel)\r\n        .text()\r\n        .trim()\r\n        .replace(\"$\", \"\")\r\n        .replace(\",\", \"\")\r\n        .replace(\"%\", \"\")\r\n    );\r\n\r\n    let maxImprovePricePF = parseFloat(\r\n      $j(maxImprovePricePFCellLabel)\r\n        .text()\r\n        .trim()\r\n        .replace(\"$\", \"\")\r\n        .replace(\",\", \"\")\r\n        .replace(\"%\", \"\")\r\n    );\r\n    let avgImprovePricePF = parseFloat(\r\n      $j(avgImprovePricePFCellLabel)\r\n        .text()\r\n        .trim()\r\n        .replace(\"$\", \"\")\r\n        .replace(\",\", \"\")\r\n        .replace(\"%\", \"\")\r\n    );\r\n    let minImprovePricePF = parseFloat(\r\n      $j(minImprovePricePFCellLabel)\r\n        .text()\r\n        .trim()\r\n        .replace(\"$\", \"\")\r\n        .replace(\",\", \"\")\r\n        .replace(\"%\", \"\")\r\n    );\r\n\r\n\r\n    let floorArea = parseFloat(\r\n      $j(floorAreaCellLabel).text().trim().replace(\",\", \"\")\r\n    );\r\n    let landSize = parseFloat(\r\n      $j(landSizeCellLabel).text().trim().replace(\",\", \"\")\r\n    );\r\n    let bcaTotalValue = parseFloat(\r\n      $j(bcaTotalValueCellLabel).text().trim().replace(\",\", \"\").replace(\"$\", \"\")\r\n    );\r\n    let avgBCAChangePercentage = parseFloat(\r\n      $j(avgBCAChangePercentageCellLabel).text().trim().replace(\",\", \"\").replace(\"%\", \"\")\r\n    );\r\n\r\n    switch (this.tableID) {\r\n      case \"34\": //attached\r\n        maxPrice = maxPricePF * floorArea;\r\n        avgPrice = avgPricePF * floorArea;\r\n        minPrice = minPricePF * floorArea;\r\n        break;\r\n      case \"35\": //detached\r\n        maxPrice = maxPricePF * landSize * (100 + avgBCAChangePercentage) / 100;\r\n        avgPrice = avgPricePF * landSize * (100 + avgBCAChangePercentage) / 100;\r\n        minPrice = minPricePF * landSize * (100 + avgBCAChangePercentage) / 100;\r\n\r\n        maxImprovePrice = maxImprovePricePF * floorArea * (100 + avgBCAChangePercentage) / 100;\r\n        avgImprovePrice = avgImprovePricePF * floorArea * (100 + avgBCAChangePercentage) / 100;\r\n        minImprovePrice = minImprovePricePF * floorArea * (100 + avgBCAChangePercentage) / 100;\r\n\r\n        maxPrice += maxImprovePrice;\r\n        avgPrice += avgImprovePrice;\r\n        minPrice += minImprovePrice;\r\n        break;\r\n    }\r\n    let cmaMaxPrice = $j(`#pid_market_${cmaType}_value_max`);\r\n    let cmaAvgPrice = $j(`#pid_market_${cmaType}_value_avg`);\r\n    let cmaMinPrice = $j(`#pid_market_${cmaType}_value_min`);\r\n    // Create our number formatter.\r\n    var formatter = new Intl.NumberFormat(\"en-US\", {\r\n      style: \"currency\",\r\n      currency: \"USD\",\r\n      minimumFractionDigits: 0,\r\n      maximumFractionDigits: 0\r\n    });\r\n\r\n    cmaMinPrice.text(\"------\");\r\n    cmaAvgPrice.text(\"------\");\r\n    cmaMaxPrice.text(formatter.format(maxPrice.toFixed(0)));\r\n    if (bcaTotalValue < avgPrice * 1.1) {\r\n      cmaAvgPrice.text(formatter.format(avgPrice.toFixed(0)));\r\n    }\r\n    if (bcaTotalValue < minPrice) {\r\n      cmaMinPrice.text(formatter.format(minPrice.toFixed(0)));\r\n    }\r\n\r\n    // show value-price-ratio gauge\r\n    let rangeMax = maxPrice - minPrice;\r\n    let subjectPrice = parseInt($j(`#subject-${cmaType}-price-id`).attr('value'));\r\n    let rangeSubjectVal = maxPrice - subjectPrice;\r\n    let rangeAvg = maxPrice - avgPrice;\r\n    let canvasNo = cmaType == 'active' ? 1 : 3;\r\n    this.drawValuePriceRationGauge(0, rangeAvg, rangeMax, rangeSubjectVal, canvasNo);\r\n\r\n  }\r\n\r\n  evaluateSoldButton1() {\r\n    let buttonEvaluate = $j(\"#pid_cma_sold_evaluate_submit\");\r\n    buttonEvaluate.click((e) => {\r\n      this.evaluateByMarketPrice('sold');\r\n    });\r\n  }\r\n\r\n  evaluateButton2() {\r\n    let buttonEvaluate = $j(\"#pid_cma_evaluate_by_bca_submit\");\r\n    buttonEvaluate.click((e) => {\r\n      this.evaluateByBCAChange('active');\r\n    });\r\n  }\r\n\r\n  evaluateByBCAChange(cmaType) {\r\n    let bcaTotalValueCellLabel = \"#pid_cma_bca_total_value\";\r\n    let maxPricePSFCellLabel = `#pid_cma_${cmaType}_bca_change_perc_max`;\r\n    let avgPricePSFCellLabel = `#pid_cma_${cmaType}_bca_change_perc_avg`;\r\n    let minPricePSFCellLabel = `#pid_cma_${cmaType}_bca_change_perc_min`;\r\n\r\n    let cmaMaxPriceCellLabel = `#pid_market_${cmaType}_value_max_2`; // get target cell\r\n    let cmaAvgPriceCellLabel = `#pid_market_${cmaType}_value_avg_2`;\r\n    let cmaMinPriceCellLabel = `#pid_market_${cmaType}_value_min_2`;\r\n\r\n    let bcaTotalValue = parseFloat(\r\n      $j(bcaTotalValueCellLabel)\r\n        .text()\r\n        .trim()\r\n        .replace(/,/g, \"\")\r\n        .replace(\"$\", \"\")\r\n    );\r\n    let maxPricePF = parseFloat(\r\n      $j(maxPricePSFCellLabel)\r\n        .text()\r\n        .trim()\r\n        .replace(\"$\", \"\")\r\n        .replace(/,/g, \"\")\r\n        .replace(\"%\", \"\")\r\n    );\r\n    let avgPricePF = parseFloat(\r\n      $j(avgPricePSFCellLabel)\r\n        .text()\r\n        .trim()\r\n        .replace(\"$\", \"\")\r\n        .replace(/,/g, \"\")\r\n        .replace(\"%\", \"\")\r\n    );\r\n    let minPricePF = parseFloat(\r\n      $j(minPricePSFCellLabel)\r\n        .text()\r\n        .trim()\r\n        .replace(\"$\", \"\")\r\n        .replace(/,/g, \"\")\r\n        .replace(\"%\", \"\")\r\n    );\r\n    let maxPrice = ((100 + maxPricePF) / 100) * bcaTotalValue;\r\n    let avgPrice = ((100 + avgPricePF) / 100) * bcaTotalValue;\r\n    let minPrice = ((100 + minPricePF) / 100) * bcaTotalValue;\r\n    let cmaMaxPrice = $j(cmaMaxPriceCellLabel); // get target cell\r\n    let cmaAvgPrice = $j(cmaAvgPriceCellLabel);\r\n    let cmaMinPrice = $j(cmaMinPriceCellLabel);\r\n    // Create our number formatter.\r\n    var formatter = new Intl.NumberFormat(\"en-US\", {\r\n      style: \"currency\",\r\n      currency: \"USD\",\r\n      minimumFractionDigits: 0,\r\n      maximumFractionDigits: 0\r\n    });\r\n\r\n    cmaMaxPrice.text(formatter.format(maxPrice.toFixed(0)));\r\n    cmaAvgPrice.text(formatter.format(avgPrice.toFixed(0)));\r\n    cmaMinPrice.text(formatter.format(minPrice.toFixed(0)));\r\n\r\n    // show value-price-ratio gauge\r\n    let rangeMax = maxPrice - minPrice;\r\n    let subjectPrice = parseInt($j(`#subject-${cmaType}-price-id`).attr('value'));\r\n    let rangeSubjectVal = maxPrice - subjectPrice;\r\n    let rangeAvg = maxPrice - avgPrice;\r\n    let canvasNo = cmaType == 'active' ? 2 : 4;\r\n    this.drawValuePriceRationGauge(0, rangeAvg, rangeMax, rangeSubjectVal, canvasNo);\r\n  }\r\n\r\n  evaluateSoldButton2() {\r\n    let buttonEvaluate = $j(\"#pid_cma_sold_evaluate_by_bca_submit\");\r\n    buttonEvaluate.click((e) => {\r\n      this.evaluateByBCAChange('sold');\r\n    });\r\n  }\r\n\r\n  startOver() {\r\n    let buttonEvaluate = $j(\"#pid_cma_evaluate_start_over\");\r\n    buttonEvaluate.click((e) => {\r\n      this.resetCMAResult('active');\r\n      resetGauge(1);\r\n      resetGauge(2);\r\n    });\r\n  }\r\n\r\n  startOverSold() {\r\n    let buttonEvaluate = $j(\"#pid_cma_sold_evaluate_start_over\");\r\n    buttonEvaluate.click((e) => {\r\n      this.resetCMAResult('sold');\r\n      resetGauge(3);\r\n      resetGauge(4);\r\n    });\r\n  }\r\n\r\n  resetCMAResult(cmaType) {\r\n    let cmaMaxPrice = $j(`#pid_market_${cmaType}_value_max`);\r\n    let cmaAvgPrice = $j(`#pid_market_${cmaType}_value_avg`);\r\n    let cmaMinPrice = $j(`#pid_market_${cmaType}_value_min`);\r\n    cmaMaxPrice.text(\"$\");\r\n    cmaAvgPrice.text(\"$\");\r\n    cmaMinPrice.text(\"$\");\r\n    let cmaMaxPrice2 = $j(`#pid_market_${cmaType}_value_max_2`);\r\n    let cmaAvgPrice2 = $j(`#pid_market_${cmaType}_value_avg_2`);\r\n    let cmaMinPrice2 = $j(`#pid_market_${cmaType}_value_min_2`);\r\n    cmaMaxPrice2.text(\"$\");\r\n    cmaAvgPrice2.text(\"$\");\r\n    cmaMinPrice2.text(\"$\");\r\n  }\r\n\r\n  drawValuePriceRationGauge(min, avg, max, val, canvasNo) {\r\n    let gaugeColor = '#6FADCF';\r\n    if (val > avg) {\r\n      gaugeColor = '#00FF55' // green\r\n    } else {\r\n      gaugeColor = '#FF2A2A' // red\r\n    }\r\n\r\n    var opts = {\r\n      angle: 0.15, // The span of the gauge arc\r\n      lineWidth: 0.36, // The line thickness\r\n      radiusScale: 1, // Relative radius\r\n      pointer: {\r\n        length: 0.6, // // Relative to gauge radius\r\n        strokeWidth: 0.035, // The thickness\r\n        color: '#000000' // Fill color\r\n      },\r\n      limitMax: false,     // If false, max value increases automatically if value > maxValue\r\n      limitMin: false,     // If true, the min value of the gauge will be fixed\r\n      colorStart: gaugeColor,   // Colors\r\n      colorStop: gaugeColor, //'#8FC0DA',    // just experiment with them\r\n      strokeColor: '#E0E0E0',  // to see which ones work best for you\r\n      generateGradient: true,\r\n      highDpiSupport: true,     // High resolution support\r\n\r\n    };\r\n    let target = document.getElementById(`cma-value-price-ratio-gauge-${canvasNo}`); // your canvas element\r\n    //clear target canvas\r\n    let chartContext = target.getContext(\"2d\");\r\n    let width = target.width;\r\n    let height = target.height;\r\n    chartContext.clearRect(0, 0, width, height);\r\n    let gauge = new Gauge(target).setOptions(opts); // create sexy gauge!\r\n    gauge.maxValue = max; // set max gauge value\r\n    gauge.setMinValue(0);  // Prefer setter over gauge.minValue = 0\r\n    gauge.animationSpeed = 32; // set animation speed (32 is default value)\r\n    gauge.set(val); // set actual value\r\n  }\r\n\r\n  // methods\r\n\r\n  /**\r\n   * Set the CMA Summary Cells As Per WPDATATABLE's Summary Info\r\n   * .wdt-sum-cell,  /* for totals\r\n   * .wdt-avg-cell,  /* for average\r\n   * .wdt-min-cell,  /* for minimum\r\n   * .wdt-max-cell,  /* for maximum\r\n   * @parameters:\r\n   * aggregateName: From Different Table Colomn, e.g Total Price / Price Per Square Feet\r\n   * aggregateType: Max / Min / Ave\r\n   */\r\n  setSummaryCMACell(\r\n    tableID = 34,\r\n    aggregateType = \"max\",\r\n    aggregateNameColumn = 4,\r\n    cmaType = \"active\"\r\n  ) {\r\n    let colBCAChange = this.is_mobile ? 3 : 4;\r\n    let colBCALandValuePSF = this.is_mobile ? 7 : 11;\r\n    let colBCAHouseValuePSF = this.is_mobile ? 8 : 12;\r\n    let xTableHeading2 = $j(`#pid_cma_${cmaType}_listings`);\r\n    let xTables = xTableHeading2\r\n      .next()\r\n      .find(`table[data-wpdatatable_id=${tableID}]`);\r\n    if (xTables.length > 0) {\r\n      let xTable = xTables[0];\r\n      let aggr_price_cell = $j(xTable).find(`td.wdt-${aggregateType}-cell`)[\r\n        aggregateNameColumn\r\n      ];\r\n      if (aggr_price_cell && aggr_price_cell !== 0) {\r\n        let aggr_price = aggr_price_cell.innerText\r\n          .toLowerCase()\r\n          .replace(`${aggregateType}`, \"\")\r\n          .replace(':', '')\r\n          .replace(':', '')\r\n          .replace(':', '')\r\n          .replace(\"=\", \"\")\r\n          .replace(\".00\", \"\")\r\n          .replace(\",\", \"\")\r\n          .trim();\r\n        aggr_price = parseFloat(aggr_price)\r\n        if (aggr_price > 1000) {\r\n          aggr_price = aggr_price.toFixed(0);\r\n        } else {\r\n          aggr_price = aggr_price.toFixed(1);\r\n        }\r\n        let cell_id = \"\"; // cell_id is defined in the single-cma.php file\r\n        switch (tableID) {\r\n          case 34: //attached property\r\n            switch (aggregateNameColumn) {\r\n              case 4: // total price\r\n                cell_id = `pid_cma_${cmaType}_price`;\r\n                break;\r\n              case 5: // BCA Change%\r\n                cell_id = `pid_cma_${cmaType}_bca_change_perc`;\r\n                break;\r\n              case 6: // price per square feet\r\n                cell_id = `pid_cma_${cmaType}_price_per_square_feet`;\r\n                break;\r\n            }\r\n            break;\r\n          case 35: //detached property\r\n            switch (aggregateNameColumn) {\r\n              case colBCAChange: // BCA Change%\r\n                cell_id = `pid_cma_${cmaType}_bca_change_perc`;\r\n                break;\r\n              case colBCALandValuePSF: // price per square feet\r\n                cell_id = `pid_cma_${cmaType}_land_price_per_square_feet`;\r\n                break;\r\n              case colBCAHouseValuePSF: // price per square feet\r\n                cell_id = `pid_cma_${cmaType}_improve_price_per_square_feet`;\r\n                break;\r\n            }\r\n            break;\r\n        }\r\n        let pid_aggr_cell = $j(`#${cell_id}_${aggregateType.toLowerCase()}`);\r\n        switch (tableID) {\r\n          case 34: //attached property\r\n            if (aggregateNameColumn == 5) {\r\n              pid_aggr_cell.text(aggr_price + \"%\"); // Write the aggregate number to the correct PID_CMA_CELL\r\n            } else {\r\n              pid_aggr_cell.text(\"$\" + parseFloat(aggr_price).toLocaleString()); // Write the aggregate number to the correct PID_CMA_CELL\r\n            }\r\n            break;\r\n          case 35: //detached property\r\n            if (aggregateNameColumn == colBCAChange) {\r\n              pid_aggr_cell.text(aggr_price + \"%\"); // Write the aggregate number to the correct PID_CMA_CELL\r\n            } else {\r\n              pid_aggr_cell.text(\"$\" + parseFloat(aggr_price).toLocaleString()); // Write the aggregate number to the correct PID_CMA_CELL\r\n            }\r\n            break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  hiddenColumn() {\r\n    this.htmlCityNameCN.addClass(\"pid_wpdatatable_hidden_column\");\r\n  }\r\n}\r\n\r\nexport default WPDataTable;","class CanvasImage {\r\n  constructor(canvasID, marketSection) {\r\n    this.btnDraw = document.getElementById(`create_${canvasID}`);\r\n    this.drawingContainer = document.getElementById(\r\n      `canvas_drawing_${canvasID}`\r\n    );\r\n    this.marketSection = marketSection;\r\n    this.chartType = \"\";\r\n    this.updateChartCommunities();\r\n    this.chartCanvasID = canvasID;\r\n    this.drawCanvas = document.getElementById(this.chartCanvasID);\r\n    this.propertyTypeSelect =\r\n      document[`pidMarketForm_${canvasID}`][`Property_Type_${canvasID}`];\r\n    this.chartTypeSelect =\r\n      document[`pidMarketForm_ChartType_${canvasID}`][`Chart_Type_${canvasID}`];\r\n    this.monthSelect =\r\n      document[`pidMarketForm_Time_${canvasID}`][`Stats_month_${canvasID}`];\r\n    this.YearSelect =\r\n      document[`pidMarketForm_Time_${canvasID}`][`Stats_Year_${canvasID}`];\r\n    var shareButtonLabel = $j(\"#share-button-title\").text(),\r\n      propertyTitle =\r\n        \"Market Report 2020\" /* $(\".single-property-title, .rh_page__title\").text(),*/,\r\n      propertyThumbnail = $j(\".only-for-print img\").attr(\"src\"),\r\n      descriptionTextLength = 100, // Description Test Lenght for Social Media\r\n      descriptionTextLabel = \"HPI Chart URL\"; // Label for URL you'd like to share via email\r\n    this.socialDefaultConfig = {\r\n      title: propertyTitle,\r\n      image: propertyThumbnail,\r\n      description: \"Great Vancouver Real Estate Chart\",\r\n      ui: {\r\n        flyout: $j(\"body\").hasClass(\"rtl\") ? \"bottom center\" : \"bottom center\",\r\n        // button_text: shareButtonLabel\r\n      },\r\n      networks: {\r\n        email: {\r\n          title: propertyTitle,\r\n          description:\r\n            \"Great Vancouver Real Estate Chart\" +\r\n            \"%0A%0A\" +\r\n            descriptionTextLabel +\r\n            \": \" +\r\n            window.location.href,\r\n        },\r\n      },\r\n      postID: null,\r\n    };\r\n    this.RegisterSocialButtons.call(this, jQuery);\r\n  }\r\n\r\n  RegisterSocialButtons($) {\r\n    \"use strict\";\r\n\r\n    this.socialShare = new Share(\".share-this-chart\", this.socialDefaultConfig);\r\n    this.socialDefaultConfig = JSON.parse(\r\n      JSON.stringify(this.socialShare.config)\r\n    );\r\n    this.share_button = $($(\".share-this-chart\")[0]); // share div element(bottom one)\r\n    this.share_icon = $(\"#social-share-chart\"); // share link (upper one)\r\n    // add click events\r\n    this.share_icon.on(\"click\", (e) => {\r\n      e.preventDefault();\r\n      // LIVE CODE:: bypass social post\r\n      if (this.socialShare.config.url.indexOf(\"/ss\") >= 0) {\r\n        this.socialShare.toggle();\r\n        return;\r\n      }\r\n      // Create a new market chart post, modify socialShare config data\r\n      this.postCanvasToURL((pid) => {\r\n        let newConfig = this.socialShare.config;\r\n        newConfig.url = pid_Data.siteurl + `/ss${pid}/`;\r\n        newConfig.networks.twitter.url = newConfig.url;\r\n        newConfig.networks.facebook.url = newConfig.url;\r\n        let subTitle =\r\n          pid_Data.language == \"en\"\r\n            ? \" Real Estate Home Price Chart\"\r\n            : \"\";\r\n        newConfig.description = this.chartCommunities.join(\" | \") + subTitle;\r\n        newConfig.networks.twitter.description = newConfig.description;\r\n        this.socialShare.config = newConfig;\r\n        this.socialShare.toggle();\r\n      });\r\n    });\r\n    this.share_button.on(\"click\", (e) => {\r\n      e.preventDefault();\r\n      // LIVE CODE:: bypass social post\r\n      if (this.socialShare.config.url.indexOf(\"/ss\") >= 0) {\r\n        return;\r\n      }\r\n      // Create a new market chart post, modify socialShare config data\r\n      this.postCanvasToURL((pid) => {\r\n        let newConfig = this.socialShare.config;\r\n        newConfig.url = pid_Data.siteurl + `/ss${pid}/`;\r\n        newConfig.networks.twitter.url = newConfig.url;\r\n        newConfig.networks.facebook.url = newConfig.url;\r\n        let subTitle =\r\n          pid_Data.language == \"en\"\r\n            ? \" Real Estate Home Price Chart\"\r\n            : \"\";\r\n        newConfig.description = this.chartCommunities.join(\" | \") + subTitle;\r\n        newConfig.networks.twitter.description = newConfig.description;\r\n        this.socialShare.config = newConfig;\r\n      });\r\n      // this.postDivToCanvasURL((pid) => {\r\n      //   let newConfig = this.socialShare.config;\r\n      //   newConfig.url = pid_Data.siteurl + `/ss${pid}/`;\r\n      //   newConfig.networks.twitter.url = newConfig.url;\r\n      //   newConfig.networks.facebook.url = newConfig.url;\r\n      //   this.socialShare.config = newConfig;\r\n      // });\r\n    });\r\n  }\r\n\r\n  postCanvasToURL(callback) {\r\n    // Convert canvas image to Base64\r\n    this.drawCanvas = document.getElementById(this.chartCanvasID);\r\n    var img64 = this.drawCanvas.toDataURL();\r\n    console.log(\"Blob\");\r\n    var img = document.createElement(\"img\");\r\n    img.src = img64;\r\n    img.classList.add(\"inspiry-qr-code\");\r\n    let oldImg = this.drawingContainer.querySelector(\"img\");\r\n    if (oldImg) {\r\n      oldImg.remove();\r\n    }\r\n    this.drawingContainer.append(img);\r\n    this.uploadImage(img64, callback);\r\n  }\r\n\r\n  postDivToCanvasURL(callback) {\r\n    html2canvas(document.querySelector(\"#capture\"), {\r\n      // removeContainer: false,\r\n      // canvas: document.getElementById(\"capturechartjsdrawing\"),\r\n      allowTaint: true,\r\n    }).then((canvas) => {\r\n      this.drawCanvas = canvas;\r\n      var img64 = this.drawCanvas.toDataURL();\r\n      var img = document.createElement(\"img\");\r\n      img.src = img64;\r\n      img.classList.add(\"inspiry-qr-code\");\r\n      let oldImg = this.drawingContainer.querySelector(\"img\");\r\n      if (oldImg) {\r\n        oldImg.remove();\r\n      }\r\n      this.drawingContainer.append(img);\r\n      this.drawingContainer.append(canvas);\r\n      this.uploadImage(img64, callback);\r\n    });\r\n  }\r\n\r\n  updateChartCommunities() {\r\n    let marketSection = this.marketSection;\r\n    let nbhSection = null;\r\n    let nbhNames = {};\r\n    let nbhNames_tmp = {};\r\n    if (marketSection.indexOf(\"_sub_markets_\") < 0) {\r\n      // for main market\r\n      nbhSection = $j(marketSection);\r\n      let theLabel = $j('label[for=\"' + nbhSection.attr(\"id\") + '\"]')[0];\r\n      // nbhNames_tmp = JSON.parse(nbhSection.attr(\"nbhnames\"));\r\n      // nbhNames[[Object.keys(nbhNames_tmp)[0]]] = Object.values(nbhNames_tmp)[0];\r\n      nbhNames[\"nbhCode\"] = theLabel.innerText; // label's innerText could be localed\r\n    } else {\r\n      // for sub market compare\r\n      nbhSection = $j(marketSection).find('input[type=\"hidden\"]');\r\n      let nbhSelected = $j(marketSection).find(\"label\");\r\n      let nbhCodes = \"\";\r\n      for (var i = 0; i < nbhSection.length; i++) {\r\n        let nbhSelect = $j(nbhSelected[i]).attr(\"showchart\");\r\n        if (nbhSelect != \"yes\") {\r\n          continue;\r\n        }\r\n        let nbhCode = $j(nbhSection[i]).attr(\"nbhcodes\");\r\n        let nbhName = JSON.parse($j(nbhSection[i]).attr(\"nbhnames\"));\r\n        nbhCodes = nbhCodes + \" \" + nbhCode;\r\n        nbhNames[nbhCode] = nbhName[nbhCode];\r\n      }\r\n      nbhCodes = nbhCodes.trim().split(\" \").join(\", \");\r\n    }\r\n\r\n    this.chartCommunities = Object.values(nbhNames);\r\n    this.chartType = nbhSection.attr(\"name\");\r\n  }\r\n\r\n  uploadImage(img64, callback) {\r\n    // Use WP Ajax Module\r\n    let uploadUrl = pid_Data.siteurl + \"/wp-admin/admin-ajax.php\"; // AJAX handler\r\n    // Use external Ajax Module\r\n    // if (pid_Data.siteurl.indexOf(\"pidhomes.ca\") >= 0) {\r\n    //   uploadUrl =\r\n    //     pid_Data.siteurl +\r\n    //     \"/wp-content/themes/realhomes-child-3/db/uploadImageFile.php\";\r\n    // } else {\r\n    //   uploadUrl =\r\n    //     pid_Data.siteurl +\r\n    //     \"/wp-content/themes/realhomes-child-3/db/uploadImageFile.php\";\r\n    // }\r\n\r\n    var file_data = this.dataURItoBlob(img64);\r\n    var imageFile = new File([file_data], \"uploadImage.png\");\r\n    // Select Property Type Events\r\n    this.updateChartCommunities(); // Update the Communities\r\n    var rads = this.propertyTypeSelect;\r\n    var propertyDescription = \"\";\r\n    for (var i = 0; i < rads.length; i++) {\r\n      let rad = rads[i];\r\n      if (rad.type == \"radio\" && rad.checked) {\r\n        propertyDescription = rad.value; // only show the english value\r\n        break;\r\n      } else if (rad.type == \"checkbox\") {\r\n        propertyDescription = rad.checked ? rad.labels[0].innerText : \"\";\r\n      }\r\n    }\r\n    // Select Chart Type\r\n    var chartDescription = \"\";\r\n    var radsChartType = this.chartTypeSelect;\r\n    for (var i = 0; i < radsChartType.length; i++) {\r\n      let rad = radsChartType[i];\r\n      if (rad.type == \"radio\" && rad.checked) {\r\n        chartDescription = rad.value; // only show the english value\r\n      }\r\n    }\r\n    var form_data = new FormData();\r\n    form_data.append(\"fileToUpload\", imageFile);\r\n    form_data.append(\"action\", \"uploadimage\"); // action will be used by wp-ajax call, go to a associated function\r\n    form_data.append(\r\n      \"chartParams\",\r\n      JSON.stringify({\r\n        PropertyType: propertyDescription,\r\n        Years: \"2020\",\r\n        ChartType: chartDescription, // dollar or percentage\r\n        Communities: JSON.stringify(this.chartCommunities),\r\n      })\r\n    );\r\n    $j.ajax({\r\n      url: uploadUrl, // point to server-side PHP script\r\n      dataType: \"text\", // what to expect back from the PHP script, if anything\r\n      cache: false,\r\n      contentType: false,\r\n      processData: false,\r\n      data: form_data,\r\n      type: \"post\",\r\n      success: function (php_script_response) {\r\n        // alert(php_script_response); // display response from the PHP script, if any\r\n        php_script_response = php_script_response.split(\",\")[0];\r\n        callback(php_script_response);\r\n      },\r\n    });\r\n  }\r\n\r\n  blobToFile(theBlob, fileName) {\r\n    //A Blob() is almost a File() - it's just missing the two properties below which we will add\r\n    theBlob.lastModifiedDate = new Date();\r\n    theBlob.name = fileName;\r\n    return theBlob;\r\n  }\r\n\r\n  dataURItoBlob(dataURI) {\r\n    // convert base64/URLEncoded data component to raw binary data held in a string\r\n    var byteString;\r\n    if (dataURI.split(\",\")[0].indexOf(\"base64\") >= 0)\r\n      byteString = atob(dataURI.split(\",\")[1]);\r\n    else byteString = unescape(dataURI.split(\",\")[1]);\r\n    // separate out the mime component\r\n    var mimeString = dataURI.split(\",\")[0].split(\":\")[1].split(\";\")[0];\r\n    // write the bytes of the string to a typed array\r\n    var ia = new Uint8Array(byteString.length);\r\n    for (var i = 0; i < byteString.length; i++) {\r\n      ia[i] = byteString.charCodeAt(i);\r\n    }\r\n    return new Blob([ia], { type: mimeString });\r\n  }\r\n}\r\n\r\nexport default CanvasImage;","import CanvasImage from './CanvasImage';\r\nimport SubMarkets from './SubMarkets';\r\n\r\nclass pidChart {\r\n  constructor(chartCanvasID) {\r\n    // this.vw = Math.max(\r\n    //   document.documentElement.clientWidth || 0,\r\n    //   window.innerWidth || 0\r\n    // );\r\n    // this.vh = Math.max(\r\n    //   document.documentElement.clientHeight || 0,\r\n    //   window.innerHeight || 0\r\n    // );\r\n    this.vw = document\r\n      .getElementsByClassName(\"rh_page__main\")[0]\r\n      .getBoundingClientRect().width;\r\n    this.vh = document\r\n      .getElementsByClassName(\"rh_page__main\")[0]\r\n      .getBoundingClientRect().height;\r\n\r\n    this.activeClass = \"metabox__blog-home-link-active\";\r\n    this.nonActiveClass = \"metabox__blog-home-link\";\r\n    this.chartCanvasID = chartCanvasID;\r\n    this.chartCommunities = [];\r\n    this.chartType = \"\";\r\n    this.Years = [2019, 2020];\r\n    this.Month = 1;\r\n    this.nbhLabel = \"\";\r\n    this.canvasImage = null;\r\n    this.htmlShareLink = $j('#pid_chart_share_link');\r\n    this.htmlShareInput = $j('#pid_chart_share_input');\r\n\r\n    this.chartColors2 = [\r\n      \"rgba(178, 32, 37, 0.95)\", // red\r\n      \"rgba(255, 205, 86, 0.95)\", // orange\r\n      \"rgba(75, 192, 192, 0.95)\", // yellow\r\n      \"rgba(255, 159, 64, 0.95)\", // green\r\n      \"rgba(54, 162, 235, 0.95)\", // blue\r\n      \"rgba(153, 102, 255, 0.95)\", // purple\r\n      \"rgba(204,0,102, 0.95)\", // purple2\r\n      \"rgba(128,128,128, 0.95)\", // grey\r\n      \"rgba(128,0,0, 0.95)\", // maroon\r\n      \"rgba(85,107,47, 0.95)\", // dark_olive_green\r\n      \"rgba(178, 32, 37, 0.75)\",\r\n      \"rgba(255, 159, 64, 0.75)\",\r\n      \"rgba(255, 205, 86, 0.75)\",\r\n      \"rgba(75, 192, 192, 0.75)\",\r\n      \"rgba(54, 162, 235, 0.75)\",\r\n      \"rgba(153, 102, 255, 0.75)\",\r\n      \"rgba(204,0,102, 0.75)\",\r\n      \"rgba(128,128,128, 0.75)\",\r\n      \"rgba(128,0,0, 0.75)\",\r\n      \"rgba(85,107,47, 0.75)\",\r\n      \"rgba(178, 32, 37, 0.5)\",\r\n      \"rgba(255, 159, 64, 0.5)\",\r\n      \"rgba(255, 205, 86, 0.5)\",\r\n      \"rgba(75, 192, 192, 0.5)\",\r\n      \"rgba(54, 162, 235, 0.5)\",\r\n      \"rgba(153, 102, 255, 0.5)\",\r\n      \"rgba(204,0,102, 0.5)\",\r\n      \"rgba(128,128,128, 0.5)\",\r\n      \"rgba(128,0,0, 0.5)\",\r\n      \"rgba(85,107,47, 0.5)\",\r\n      \"rgba(178, 32, 37, 0.25)\",\r\n      \"rgba(255, 159, 64, 0.25)\",\r\n      \"rgba(255, 205, 86, 0.25)\",\r\n      \"rgba(75, 192, 192, 0.25)\",\r\n      \"rgba(54, 162, 235, 0.25)\",\r\n      \"rgba(153, 102, 255, 0.25)\",\r\n      \"rgba(204,0,102, 0.25)\",\r\n      \"rgba(128,128,128, 0.25)\",\r\n      \"rgba(128,0,0, 0.25)\",\r\n      \"rgba(85,107,47, 0.25)\",\r\n      \"rgba(178, 32, 37, 0.15)\",\r\n      \"rgba(255, 159, 64, 0.15)\",\r\n      \"rgba(255, 205, 86, 0.15)\",\r\n      \"rgba(75, 192, 192, 0.15)\",\r\n      \"rgba(54, 162, 235, 0.15)\",\r\n      \"rgba(153, 102, 255, 0.15)\",\r\n      \"rgba(204,0,102, 0.15)\",\r\n      \"rgba(128,128,128, 0.15)\",\r\n      \"rgba(128,0,0, 0.15)\",\r\n      \"rgba(85,107,47, 0.15)\",\r\n    ];\r\n    var marketSection = \"\";\r\n    this.PropertyTypeSelect =\r\n      document[`pidMarketForm_${chartCanvasID}`][\r\n      `Property_Type_${chartCanvasID}`\r\n      ];\r\n    this.YearSelect =\r\n      document[`pidMarketForm_Time_${chartCanvasID}`][\r\n      `Stats_Year_${chartCanvasID}`\r\n      ];\r\n    this.Years = [];\r\n    let yearArray = Array.from(this.YearSelect);\r\n    yearArray.forEach((y) => {\r\n      if (y.checked) {\r\n        this.Years.push(y.value);\r\n      }\r\n    });\r\n    this.MonthSelect =\r\n      document[`pidMarketForm_Time_${chartCanvasID}`][\r\n      `Stats_month_${chartCanvasID}`\r\n      ];\r\n    this.Month = parseInt(this.MonthSelect.value);\r\n    this.ChartTypeSelect =\r\n      document[`pidMarketForm_ChartType_${chartCanvasID}`][\r\n      `Chart_Type_${chartCanvasID}`\r\n      ];\r\n    this.LocationForm = document[`pidMarketForm_location_${chartCanvasID}`];\r\n    this.Locations = this.LocationForm[`nbh_group_location_${chartCanvasID}`]; // get all input elements\r\n    let inputLabels = this.LocationForm.getElementsByTagName(\"label\"); // get all input labels\r\n    // if active class exit, show its chart\r\n    // if active class does not exit, show the first chart\r\n    let activeLocation = Array.from(inputLabels).filter((element, index) => {\r\n      return $j(element).hasClass(this.activeClass);\r\n    });\r\n    let activeIndex = 0;\r\n    if (activeLocation.length == 1) {\r\n      activeIndex = Array.from(inputLabels).indexOf(activeLocation[0]);\r\n    }\r\n    marketSection = \"#\" + $j(this.Locations[activeIndex]).attr(\"id\"); // use first label for start chart\r\n    this.marketSection = marketSection; // Keep the Section ID\r\n    $j(inputLabels[activeIndex]).addClass(this.activeClass);\r\n    this.neighborhoodCodes = $j(marketSection).attr(\"nbhcodes\");\r\n    this.neighborhoodNames = JSON.parse($j(marketSection).attr(\"nbhnames\"));\r\n    this.prepareCanvas(this.neighborhoodNames.length);\r\n    this.configChart([], this.chartColors2);\r\n    this.getChartData(marketSection);\r\n    this.events();\r\n  }\r\n\r\n  events() {\r\n    // start over button event\r\n    var startOver = document.getElementById(\r\n      `form_footer_button_${this.chartCanvasID}`\r\n    );\r\n    startOver.addEventListener(\"click\", () => {\r\n      console.log(\"start over clicked\");\r\n      let subMarketContainer = $j(\r\n        \"#pid_sub_markets_fieldset_\" + this.chartCanvasID\r\n      );\r\n      // subMarketContainer.children().remove();\r\n      var filter = document.getElementById(\r\n        `filter_subMarket_${this.chartCanvasID}`\r\n      );\r\n      filter.value = \"\";\r\n      subMarketContainer\r\n        .find(\"label\")\r\n        .attr(\"showchart\", \"no\")\r\n        .removeClass(\"pid_sub_select pid_sub_market_filtered\");\r\n      $j(this.Locations[0]).click();\r\n      $j(this.LocationForm.getElementsByTagName(\"label\")).removeClass(\r\n        this.activeClass\r\n      );\r\n      $j(this.LocationForm.getElementsByTagName(\"label\")[0]).addClass(\r\n        this.activeClass\r\n      );\r\n    });\r\n\r\n    // Filter applied\r\n    var filter = document.getElementById(\r\n      `filter_subMarket_${this.chartCanvasID}`\r\n    );\r\n    filter.addEventListener(\"keyup\", (e) => {\r\n      console.log(\"filter pressed\");\r\n      let filterText = e.target.value;\r\n      let subMarketContainer = $j(\r\n        \"#pid_sub_markets_fieldset_\" + this.chartCanvasID\r\n      );\r\n      subMarketContainer.find(\"label\").removeClass(\"pid_sub_market_filtered\");\r\n      if (filterText !== \"\") {\r\n        subMarketContainer\r\n          .find(\"label\")\r\n          .filter((index, node) => {\r\n            return (\r\n              $j(node).text().toLowerCase().indexOf(filterText.toLowerCase()) >=\r\n              0\r\n            );\r\n          })\r\n          .addClass(\"pid_sub_market_filtered\");\r\n      }\r\n    });\r\n\r\n    // Select Property Type Events\r\n    var rads = this.PropertyTypeSelect;\r\n    for (var i = 0; i < rads.length; i++) {\r\n      rads[i].addEventListener(\"change\", (e) => {\r\n        // uncheck Group by Types\r\n        if (e.target.type == \"radio\") {\r\n          // last emlement is the By Hood Group checkbox\r\n          rads[rads.length - 1].checked = false;\r\n        }\r\n        // read the radio value, rebuilt the share link\r\n        let paramDwell = e.target.value;\r\n        this.htmlShareInput.val(this.buildShareLink('dwell', paramDwell));\r\n        this.updateChart(e);\r\n      });\r\n    }\r\n    // Select Stats Year Events\r\n    var checkboxes = this.YearSelect;\r\n    for (var i = 0; i < checkboxes.length; i++) {\r\n      checkboxes[i].addEventListener(\"click\", (e) => {\r\n        console.log(\"checkbox clicked!\");\r\n        this.Years = [];\r\n        let chkBoxes = this.YearSelect;\r\n        let paramYears = '';\r\n        for (var i = 0; i < chkBoxes.length; i++) {\r\n          if (chkBoxes[i].checked) {\r\n            this.Years.push(parseInt(chkBoxes[i].value));\r\n            paramYears += chkBoxes[i].value + ',';\r\n          }\r\n        }\r\n        // remove the last ',' from paramYears\r\n        paramYears = paramYears.slice(0, -1);\r\n        // rebuild the share link\r\n        this.htmlShareInput.val(this.buildShareLink('year', paramYears));\r\n\r\n        let activeClass = this.activeClass;\r\n        let inputLabels = this.LocationForm.getElementsByTagName(\"label\");\r\n        for (var i = 0; i < inputLabels.length; i++) {\r\n          if (inputLabels[i].className.indexOf(activeClass) >= 0) {\r\n            let inputID = $j(inputLabels[i]).attr(\"for\");\r\n            $j(\"#\" + inputID).trigger(\"click\");\r\n          }\r\n        }\r\n      });\r\n    }\r\n    // Select Stats Month Events\r\n    var monthSelect = this.MonthSelect;\r\n    monthSelect.addEventListener(\"change\", (e) => {\r\n      console.log(\"month changed!\");\r\n      this.Month = e.target.value;\r\n      // rebuild the share link with new month value\r\n      this.htmlShareInput.val(this.buildShareLink('month', this.Month));\r\n\r\n      let activeClass = this.activeClass;\r\n      let inputLabels = this.LocationForm.getElementsByTagName(\"label\");\r\n      for (var i = 0; i < inputLabels.length; i++) {\r\n        if (inputLabels[i].className.indexOf(activeClass) >= 0) {\r\n          let inputID = $j(inputLabels[i]).attr(\"for\");\r\n          $j(\"#\" + inputID).trigger(\"click\");\r\n        }\r\n      }\r\n    });\r\n    // Select Chart Type Events\r\n    var radsChartType = this.ChartTypeSelect;\r\n    for (var i = 0; i < radsChartType.length; i++) {\r\n      radsChartType[i].addEventListener(\"change\", (e) => {\r\n        // this.updateChart(e);\r\n        console.log(\"Chart Type Changed\");\r\n        this.Years = [];\r\n        let chkBoxes = this.YearSelect;\r\n        let paramYears = \"\";\r\n        for (var i = 0; i < chkBoxes.length; i++) {\r\n          if (chkBoxes[i].checked) {\r\n            this.Years.push(parseInt(chkBoxes[i].value));\r\n            paramYears += chkBoxes[i].value + ',';\r\n          }\r\n        }\r\n        // trim last , of paramYears\r\n        paramYears = paramYears.slice(0, -1);\r\n        this.htmlShareInput.val(this.buildShareLink('year', paramYears));\r\n        this.htmlShareInput.val(this.buildShareLink('chart', e.target.value == 'percentage' ? 'perc' : 'dollar'));\r\n\r\n        let activeClass = this.activeClass;\r\n        let inputLabels = this.LocationForm.getElementsByTagName(\"label\");\r\n        for (var i = 0; i < inputLabels.length; i++) {\r\n          if (inputLabels[i].className.indexOf(activeClass) >= 0) {\r\n            let inputID = $j(inputLabels[i]).attr(\"for\");\r\n            $j(\"#\" + inputID).trigger(\"click\");\r\n            return;\r\n          }\r\n        }\r\n        this.prepareCanvas();\r\n        this.configChart([], this.chartColors2);\r\n        this.getChartData_Compare(\r\n          \"#pid_sub_markets_fieldset_\" + this.chartCanvasID\r\n        );\r\n      });\r\n    }\r\n    // add location labels event (inputLables are for city/district/community lables)\r\n    var inputLabels = this.LocationForm.getElementsByTagName(\"label\");\r\n    for (var i = 0; i < inputLabels.length; i++) {\r\n      inputLabels[i].addEventListener(\"click\", (e) => {\r\n        // GET the Label's (e.target) associated Input: document.getElementById(e.target.htmlFor)\r\n        console.log(\"label clicked:\", e.target);\r\n        this.nbhLabel = e.target.innerText; // this does not work with Chinese Labels, have to add an attribute slug for the Label\r\n        this.nbhLabel = e.target.getAttribute(\"slug\");\r\n        // $nbhLabelForInput = document.getElementById(e.target.htmlFor);\r\n        let inputLabels = e.target.parentElement.querySelectorAll(\"label\");\r\n        let nonActiveClass = this.nonActiveClass;\r\n        for (let i = 0; i < inputLabels.length; i++) {\r\n          inputLabels[i].classList.add(nonActiveClass);\r\n        }\r\n        let activeClass = this.activeClass;\r\n        inputLabels.forEach((label, index) => {\r\n          if (label.innerText != e.target.innerText) {\r\n            label.classList.remove(activeClass);\r\n          }\r\n        });\r\n        $j(e.target).toggleClass(activeClass);\r\n        let inputID = $j(e.target).attr(\"for\");\r\n        let subMarketContainer = $j(\r\n          \"#pid_sub_markets_fieldset_\" + this.chartCanvasID\r\n        );\r\n\r\n        // show charts of the main label\r\n        if (\r\n          subMarketContainer\r\n            .find(`label.pid_sub_market_label_heading`)\r\n            .filter((index, node) => {\r\n              return $j(node).text() === e.target.innerText;\r\n            }).length == 0\r\n        ) {\r\n          // if has not show sub market labels, add labels and show sub market select panel\r\n          $j(\"#\" + inputID).trigger(\"click\");\r\n          // creat the subMarkets panel, only the panel, sub labels have to be added later\r\n          var subMarkets = new SubMarkets(\r\n            this.chartCanvasID,\r\n            e.target.getAttribute(\"slug\") //cannot use e.target.innerText as label ID if in Chinese version\r\n          );\r\n        } else {\r\n          if ($j(e.target).hasClass(activeClass)) {\r\n            $j(\"#\" + inputID).trigger(\"click\");\r\n            return;\r\n          }\r\n          this.prepareCanvas();\r\n          this.configChart([], this.chartColors2);\r\n\r\n          this.getChartData_Compare(\r\n            \"#pid_sub_markets_fieldset_\" + this.chartCanvasID\r\n          );\r\n        }\r\n\r\n        // get the sub market codes and names\r\n        let nbhCodes = $j(\"#\" + inputID)\r\n          .attr(\"nbhcodes\")\r\n          .split(\",\");\r\n        let nbhNames = JSON.parse($j(\"#\" + inputID).attr(\"nbhnames\"));\r\n\r\n        // Add leading lable for the sub areas\r\n\r\n        // ADD the sub_market_label\r\n        // ADD click event to draw charts to each label\r\n        for (var i = 0; i < nbhCodes.length; i++) {\r\n          let inputLabel = nbhNames[nbhCodes[i]]; // set label to nbh names, Best Practice should be nbh codes;\r\n          let subInputID = inputID + \"_\" + nbhCodes[i];\r\n          let labelClass = \"pid_sub_market_label\";\r\n          if (i == 0 && this.chartCanvasID.indexOf(\"_1\") < 0) {\r\n            labelClass = \"pid_sub_market_label_heading\";\r\n          }\r\n          const objNbhName = {};\r\n          objNbhName[nbhCodes[i]] = nbhNames[nbhCodes[i]];\r\n          let nbhName = JSON.stringify(objNbhName);\r\n\r\n          let subMarketLabel = $j(\r\n            `<label class=\"${labelClass}\" slug=\"${inputLabel}\" showchart=\"no\" for=\"${subInputID}\">${inputLabel}</label>`\r\n          );\r\n          let labelExisted = $j(`#${subInputID}`);\r\n          if (labelExisted.length > 0) {\r\n            continue;\r\n          }\r\n          let subMarketInput = $j(\r\n            `<input type=\"hidden\" id=\"${subInputID}\" name=\"nbh_sub_market\" nbhcodes=\"${nbhCodes[i]}\" nbhnames='${nbhName}'>`\r\n          );\r\n          subMarkets.labelContainer.append(subMarketLabel);\r\n          subMarkets.labelContainer.append(subMarketInput);\r\n          // add subMarket Labels events\r\n          subMarketLabel.on(\"click\", (e) => {\r\n            let thisLabel = $j(e.target);\r\n            let msg = thisLabel.attr(\"for\");\r\n            console.log(\"subMarket:: \", msg);\r\n            thisLabel.toggleClass(\"pid_sub_select\");\r\n            // main market labels remove active class\r\n            var inputLabels = this.LocationForm.getElementsByTagName(\"label\");\r\n            this.nbhLabel = e.target.innerText; // this does not work for chinese labels\r\n            this.nbhLabel = e.target.getAttribute(\"slug\"); // temperally change to slug, Best Practice should use nbh codes\r\n            // $nbhLabelForInput = document.getElementById(e.target.htmlFor);\r\n            $j(inputLabels).removeClass(this.activeClass);\r\n            if (thisLabel.hasClass(\"pid_sub_select\")) {\r\n              thisLabel.attr(\"showchart\", \"yes\");\r\n            } else {\r\n              thisLabel.attr(\"showchart\", \"no\");\r\n            }\r\n\r\n            this.prepareCanvas(nbhNames.length);\r\n            this.configChart([], this.chartColors2);\r\n\r\n            this.getChartData_Compare(\r\n              \"#pid_sub_markets_fieldset_\" + this.chartCanvasID\r\n            );\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    var inputs = this.Locations;\r\n    for (var i = 0; i < inputs.length; i++) {\r\n      inputs[i].addEventListener(\"click\", (e) => {\r\n        let thisInput = $j(e.target);\r\n        console.log(\"input clicked:\", e.target);\r\n        let marketSection = \"#\" + thisInput.attr(\"id\");\r\n        this.neighborhoodCodes = $j(marketSection).attr(\"nbhcodes\");\r\n        console.log(this.neighborhoodCodes);\r\n        this.neighborhoodNames = JSON.parse($j(marketSection).attr(\"nbhnames\"));\r\n        console.log(this.neighborhoodNames);\r\n        this.prepareCanvas(this.neighborhoodNames.length);\r\n        this.configChart([], this.chartColors2);\r\n        this.getChartData(marketSection);\r\n      });\r\n    }\r\n  }\r\n\r\n  prepareCanvas() {\r\n    this.vw = document\r\n      .getElementsByClassName(\"rh_page__main\")[0]\r\n      .getBoundingClientRect().width;\r\n    this.vh = document\r\n      .getElementsByClassName(\"rh_page__main\")[0]\r\n      .getBoundingClientRect().height;\r\n    this.chartDataSets_All = [];\r\n    this.chartDataSets_Detached = [];\r\n    this.chartDataSets_Townhouse = [];\r\n    this.chartDataSets_Apartment = [];\r\n    this.chartDataSets_GroupByNbh = [];\r\n    this.pidChart = {};\r\n    this.chartConfig = {};\r\n    let chartCanvas = document.getElementById(this.chartCanvasID);\r\n    this.chartCanvas = chartCanvas;\r\n    let chartContext = chartCanvas.getContext(\"2d\");\r\n    let width = chartCanvas.width;\r\n    let height = chartCanvas.height;\r\n    chartContext.clearRect(0, 0, width, height);\r\n\r\n    let canvasContainer = $j(\"#canvas_wrapper_\" + this.chartCanvasID);\r\n    chartCanvas.remove();\r\n    let canvasNew =\r\n      '<canvas id=\"' +\r\n      this.chartCanvasID +\r\n      '\" height=\"400px !important\" , width=\"400\"></canvas>';\r\n    canvasContainer.append(canvasNew);\r\n    let canvas = document.querySelector(\"#\" + this.chartCanvasID);\r\n    canvas.hidden = true;\r\n    let ctx = canvas.getContext(\"2d\");\r\n    ctx.canvas.width = this.vw * 0.9;\r\n    let ctxHeight = (ctx.canvas.width / 16) * 9;\r\n    // if on mobile device, and location are more than 10, double the height\r\n    switch (true) {\r\n      case ctx.canvas.width < 500:\r\n        ctx.canvas.height = ctx.canvas.width * 0.8;\r\n        break;\r\n      case ctx.canvas.width < 1100:\r\n        ctx.canvas.height = ctx.canvas.width * 0.7;\r\n        break;\r\n      default:\r\n        ctx.canvas.height = ctxHeight; // 400;\r\n        break;\r\n    }\r\n    this.ctx = ctx;\r\n  }\r\n\r\n  prepareCanvasSize(chartLines = 5) {\r\n    this.vw = document\r\n      .getElementsByClassName(\"rh_page__main\")[0]\r\n      .getBoundingClientRect().width;\r\n    this.vh = document\r\n      .getElementsByClassName(\"rh_page__main\")[0]\r\n      .getBoundingClientRect().height;\r\n\r\n    let canvas = document.querySelector(\"#\" + this.chartCanvasID);\r\n    canvas.hidden = true;\r\n    let ctx = canvas.getContext(\"2d\");\r\n    ctx.canvas.width = this.vw * 0.9;\r\n    let ctxHeight = (ctx.canvas.width / 16) * 9;\r\n    // if on mobile device, and location are more than 10, double the height\r\n    switch (true) {\r\n      case ctx.canvas.width < 500:\r\n        switch (true) {\r\n          case chartLines < 4:\r\n            ctx.canvas.height = ctxHeight;\r\n            break;\r\n          case chartLines >= 4 && chartLines < 8:\r\n            ctx.canvas.height = ctxHeight * 1.2;\r\n            break;\r\n          default:\r\n            ctx.canvas.height = ctxHeight * 1.5;\r\n            break;\r\n        }\r\n        break;\r\n      case ctx.canvas.width < 1100:\r\n        ctx.canvas.height =\r\n          chartLines > 14 ? ctx.canvas.width * 0.9 : ctxHeight;\r\n        break;\r\n      default:\r\n        ctx.canvas.height = 19 ? ctx.canvas.width * 0.8 : ctxHeight; // 400;\r\n        break;\r\n    }\r\n    this.ctx = ctx;\r\n    this.chartConfig.options.legend.maxSize.height = ctx.canvas.height * 0.2;\r\n  }\r\n\r\n  configChart(dataSets, colors) {\r\n    let self = this;\r\n    if (dataSets.length == 0) {\r\n      let codes = this.neighborhoodCodes.split(\",\");\r\n      for (var i = 0; i < codes.length; i++) {\r\n        dataSets.push({\r\n          label: \"\",\r\n          data: {},\r\n        });\r\n      }\r\n    }\r\n    //set up datasets for the chart\r\n    let chartDataSets = [];\r\n    for (var i = 0; i < dataSets.length; i++) {\r\n      chartDataSets.push({\r\n        label: dataSets[i].label,\r\n        fill: false,\r\n        backgroundColor: colors[i], //\r\n        borderColor: colors[i],\r\n        data: dataSets[i].data,\r\n      });\r\n    }\r\n\r\n    let defaultOptions = {\r\n      global: {\r\n        defaultFontFamily: \"Helvetica\",\r\n      },\r\n    };\r\n\r\n    let config = {\r\n      type: \"line\",\r\n      data: {\r\n        datasets: chartDataSets,\r\n      },\r\n      options: {\r\n        title: {\r\n          display: false,\r\n          text: \"\",\r\n        },\r\n        legend: {\r\n          maxSize: {\r\n            height: 80,\r\n          },\r\n          position: \"bottom\",\r\n          labels: {\r\n            // This more specific font property overrides the global property\r\n            fontFamily: \"Helvetica\",\r\n          },\r\n        },\r\n        responsive: true,\r\n        maintainAspectRatio: false,\r\n        tooltips: {\r\n          mode: \"interpolate\", //\"index\",\r\n          intersect: false,\r\n        },\r\n        plugins: {\r\n          crosshair: {\r\n            line: {\r\n              color: \"#F66\", // crosshair line color\r\n              width: 1, // crosshair line width\r\n            },\r\n            sync: {\r\n              enabled: false,\r\n              group: 1, // chart group\r\n              suppressTooltips: false,\r\n            },\r\n            zoom: {\r\n              enabled: false, // enable zooming\r\n              zoomboxBackgroundColor: \"rgba(66,133,244,0.2)\", // background color of zoom box\r\n              zoomboxBorderColor: \"#48F\", // border color of zoom box\r\n              zoomButtonText: \"Reset Zoom\", // reset zoom button text\r\n              zoomButtonClass: \"reset-zoom\", // reset zoom button class\r\n            },\r\n            callbacks: {\r\n              beforeZoom: function (start, end) {\r\n                // called before zoom, return false to prevent zoom\r\n                return true;\r\n              },\r\n              afterZoom: function (start, end) {\r\n                setTimeout(function () {\r\n                  chart6.data.datasets[0].data = generate(start, end);\r\n                  chart6.update();\r\n                }, 1000);\r\n              },\r\n            },\r\n          },\r\n        },\r\n        hover: {\r\n          mode: \"nearest\",\r\n          intersect: true,\r\n        },\r\n        scales: {\r\n          xAxes: [\r\n            {\r\n              type: \"time\",\r\n              time: {\r\n                unit: \"quarter\",\r\n                displayFormats: {\r\n                  quarter: \"YY[Q]Q\",\r\n                },\r\n              },\r\n            },\r\n          ],\r\n          yAxes: [\r\n            {\r\n              display: true,\r\n              scaleLabel: {\r\n                display: true,\r\n                labelString:\r\n                  self.ChartTypeSelect.value == \"dollar\"\r\n                    ? \"House Value\" +\r\n                    (self.vw < 500 ? \"(million dollars)\" : \"(dollars)\")\r\n                    : \"Change %\",\r\n              },\r\n              fontFamily: \"monospaced\",\r\n              ticks: {\r\n                callback: function (value, index, values) {\r\n                  let newValue = \"\";\r\n                  if (self.ChartTypeSelect.value == \"dollar\") {\r\n                    if (self.vw < 500) {\r\n                      newValue = value / 1000000;\r\n                    } else {\r\n                      newValue = \"$\" + value / 1000 + \"K\";\r\n                    }\r\n                  }\r\n                  if (self.ChartTypeSelect.value == \"percentage\") {\r\n                    newValue = value + \"%\";\r\n                  }\r\n                  return newValue;\r\n                },\r\n              },\r\n            },\r\n          ],\r\n        },\r\n      },\r\n      defaults: defaultOptions,\r\n    };\r\n    this.chartConfig = {};\r\n    this.chartConfig = config;\r\n  }\r\n\r\n  updateChart(e) {\r\n    console.log(e.target.value); //property type value\r\n    console.log(this.pidChart);\r\n\r\n    switch (e.target.value.toLowerCase().trim()) {\r\n      case \"all\":\r\n      case \"detached\":\r\n      case \"townhouse\":\r\n      case \"apartment\":\r\n      case \"condo\":\r\n        this.configChart(\r\n          this[`chartDataSets_${e.target.value.trim()}`],\r\n          this.chartColors2\r\n        );\r\n        break;\r\n      default:\r\n        if (e.target.checked) {\r\n          // remove radios check marks\r\n          let rads = this.PropertyTypeSelect;\r\n          for (var i = 0; i < rads.length - 1; i++) {\r\n            rads[i].checked = false; // uncheck the radios, but do not keep the checkbox for nbh group\r\n          }\r\n          // do chart\r\n          let firstNbh = this.chartDataSets_GroupByNbh[0][0];\r\n          let chartDataSets = this.chartDataSets_GroupByNbh\r\n            .filter((nbhSet) => nbhSet[0] == firstNbh)\r\n            .map((nbhSet) => nbhSet[1]);\r\n          this.configChart(chartDataSets, this.chartColors2);\r\n        } else {\r\n          Array.from(this.PropertyTypeSelect)\r\n            .filter((rad) => rad.checked)\r\n            .map((rad) => {\r\n              this.configChart(\r\n                this[`chartDataSets_${rad.value}`],\r\n                this.chartColors2\r\n              );\r\n            });\r\n        }\r\n        break;\r\n    }\r\n    this.pidChart.config = this.chartConfig;\r\n    this.pidChart.update();\r\n\r\n    if ($j(`#${this.chartCanvasID}`).length > 0) {\r\n      if (this.canvasImage == null) {\r\n        this.canvasImage = new CanvasImage(this.chartCanvasID);\r\n      } else {\r\n        // reset socialShare config\r\n        this.canvasImage.socialShare.config = JSON.parse(\r\n          JSON.stringify(this.canvasImage.socialDefaultConfig)\r\n        );\r\n      }\r\n    }\r\n    this.drawCanvas = document.getElementById(this.chartCanvasID);\r\n  }\r\n\r\n  removeData(chart) {\r\n    chart.data.labels.pop();\r\n    chart.data.datasets.forEach((dataset) => {\r\n      dataset.data.pop();\r\n    });\r\n    chart.update();\r\n  }\r\n\r\n  addData(chart, label, data) {\r\n    chart.data.labels.push(label);\r\n    // chart.data.datasets.forEach(dataset => {\r\n    //   dataset.data.push(data);\r\n    // });\r\n    data.forEach((dataSet) => chart.data.datasets.push(dataSet));\r\n    chart.update();\r\n    console.log(chart.data.datasets);\r\n  }\r\n\r\n  // copyTextToClipboard(text) {\r\n  //   if (!navigator.clipboard) {\r\n  //     // this.fallbackCopyTextToClipboard(text);\r\n  //     return;\r\n  //   }\r\n  //   navigator.clipboard.writeText(text).then(\r\n  //     function () {\r\n  //       console.log(\"Async: Copying to clipboard was successful!\");\r\n  //     },\r\n  //     function (err) {\r\n  //       console.error(\"Async: Could not copy text: \", err);\r\n  //     }\r\n  //   );\r\n  // }\r\n\r\n  // fallbackCopyTextToClipboard(text) {\r\n  //   Clipboard.copy(text);\r\n  //   return;\r\n  // }\r\n\r\n  buildShareLink(paramName, paramValue) {\r\n\r\n    // twitter and facebook does not support get params, change & to +\r\n    paramValue = paramValue.toLowerCase();\r\n    let shareLink = this.htmlShareInput.val();\r\n    let shareLinkRegex = /https?:\\/\\/([a-z0-9A-Z\\.-]+\\/)+/;\r\n    let dwellRegex = /dwell=[a-z]+/;\r\n    let chartRegex = /chart=[a-z]+/;\r\n    let yearRegex = /y=[\\d,]+/;\r\n    let monthRegex = /mh=[\\d]{1,2}/;\r\n    let mainShareLink = shareLinkRegex.test(shareLink) ? shareLink.match(shareLinkRegex)[0] : '';\r\n    let paramDwell = dwellRegex.test(shareLink) ? shareLink.match(dwellRegex)[0] : 'dwell=all';\r\n    let paramChart = chartRegex.test(shareLink) ? '$' + shareLink.match(chartRegex)[0] : '';\r\n    let paramYear = yearRegex.test(shareLink) ? '$' + shareLink.match(yearRegex)[0] : '';\r\n    let paramMonth = monthRegex.test() ? '$' + shareLink.match(monthRegex)[0] : '';\r\n    switch (paramName) {\r\n      case 'dwell':\r\n        paramValue = paramValue == 'on' ? 'groupbynbh' : paramValue; // if 'on', then By Hood Checkbox is selected\r\n        paramDwell = `dwell=${paramValue}`;\r\n        break;\r\n      case 'chart':\r\n        paramChart = `$chart=${paramValue}`;\r\n        break;\r\n      case 'year':\r\n        paramYear = `$y=${paramValue}`;\r\n        break;\r\n      case 'month':\r\n        paramMonth = `$mh=${paramValue}`;\r\n        break;\r\n    }\r\n    let newMainShareLink = mainShareLink + `?${paramDwell}${paramChart}${paramYear}${paramMonth}`;\r\n    // this.copyTextToClipboard(newMainShareLink);\r\n    this.htmlShareLink.attr(\"href\", newMainShareLink);\r\n    return newMainShareLink;\r\n  }\r\n\r\n  getChartData(marketSection) {\r\n    var nbhSection = $j(marketSection);\r\n    var nbhCodes = nbhSection.attr(\"nbhcodes\");\r\n    this.chartCommunities = Object.values(\r\n      JSON.parse(nbhSection.attr(\"nbhnames\"))\r\n    );\r\n    this.chartType = nbhSection.attr(\"name\");\r\n    if (this.canvasImage) {\r\n      this.canvasImage.marketSection = marketSection;\r\n    }\r\n    var years = JSON.stringify(this.Years);\r\n    let month = this.Month;\r\n    console.log(nbhCodes);\r\n    var self = this;\r\n    let chartDataUrl = \"\";\r\n    switch (self.ChartTypeSelect.value) {\r\n      case \"dollar\":\r\n        if (pid_Data.siteurl.indexOf(\"pidhomes.ca\") >= 0) {\r\n          chartDataUrl =\r\n            pid_Data.siteurl +\r\n            \"/wp-content/themes/realhomes-child-3/db/chartData.php\";\r\n        } else {\r\n          chartDataUrl =\r\n            pid_Data.siteurl +\r\n            \"/wp-content/themes/realhomes-child-3/db/chartData.php\";\r\n        }\r\n        break;\r\n      case \"percentage\":\r\n        if (pid_Data.siteurl.indexOf(\"pidhomes.ca\") >= 0) {\r\n          chartDataUrl =\r\n            pid_Data.siteurl +\r\n            \"/wp-content/themes/realhomes-child-3/db/chartData_Percentage.php\";\r\n        } else {\r\n          chartDataUrl =\r\n            pid_Data.siteurl +\r\n            \"/wp-content/themes/realhomes-child-3/db/chartData_Percentage.php\";\r\n        }\r\n        break;\r\n    }\r\n\r\n    $j.ajax({\r\n      url: chartDataUrl,\r\n      method: \"get\",\r\n      data: { Neighborhood_IDs: nbhCodes, Years: years, Month: month },\r\n      dataType: \"JSON\",\r\n      success: function (res) {\r\n        res.forEach((dataSet) => {\r\n          let xPropertyType = dataSet[\"property_Type\"].trim();\r\n          let xData = {\r\n            label: self.neighborhoodNames[dataSet[\"nbr_ID\"].trim()],\r\n            data: dataSet[\"nbr_Data\"],\r\n          };\r\n          // add dataset group by nbh\r\n          let yNeighborhood = self.neighborhoodNames[dataSet[\"nbr_ID\"].trim()];\r\n          let yData = {\r\n            label:\r\n              self.neighborhoodNames[dataSet[\"nbr_ID\"].trim()] +\r\n              \"_\" +\r\n              xPropertyType,\r\n            data: dataSet[\"nbr_Data\"],\r\n          };\r\n          switch (yNeighborhood) {\r\n            default:\r\n              self.chartDataSets_GroupByNbh.push([yNeighborhood, yData]);\r\n              break;\r\n          }\r\n          switch (xPropertyType) {\r\n            case \"All\":\r\n              self.chartDataSets_All.push(xData);\r\n              break;\r\n            case \"Detached\":\r\n              self.chartDataSets_Detached.push(xData);\r\n              break;\r\n            case \"Townhouse\":\r\n              self.chartDataSets_Townhouse.push(xData);\r\n              break;\r\n            case \"Apartment\":\r\n              self.chartDataSets_Apartment.push(xData);\r\n              break;\r\n          }\r\n        });\r\n\r\n        let rads = self.PropertyTypeSelect;\r\n        let chkGroupByNbh = Array.from(self.PropertyTypeSelect).filter(\r\n          (rad) => rad.value == \"on\"\r\n        )[0].checked;\r\n        if (chkGroupByNbh) {\r\n          let thisNbh = self.nbhLabel\r\n            ? self.nbhLabel\r\n            : self.chartDataSets_GroupByNbh[0][0];\r\n          let chartDataSets = self.chartDataSets_GroupByNbh\r\n            .filter((nbhSet) => nbhSet[0] == thisNbh)\r\n            .map((nbhSet) => nbhSet[1]);\r\n          self.configChart(chartDataSets, self.chartColors2);\r\n        } else {\r\n          for (var i = 0; i < rads.length; i++) {\r\n            let radValue = rads[i].value;\r\n            let radChecked = rads[i].checked;\r\n            if (radChecked) {\r\n              switch (radValue) {\r\n                case \"All\":\r\n                  self.configChart(self.chartDataSets_All, self.chartColors2);\r\n                  break;\r\n                case \"Detached\":\r\n                  self.configChart(\r\n                    self.chartDataSets_Detached,\r\n                    self.chartColors2\r\n                  );\r\n                  break;\r\n                case \"Townhouse\":\r\n                  self.configChart(\r\n                    self.chartDataSets_Townhouse,\r\n                    self.chartColors2\r\n                  );\r\n                  break;\r\n                case \"Apartment\":\r\n                  self.configChart(\r\n                    self.chartDataSets_Apartment,\r\n                    self.chartColors2\r\n                  );\r\n                  break;\r\n              }\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        self.prepareCanvasSize(self.chartConfig.data.datasets.length);\r\n        self.drawChart(self.chartConfig);\r\n      },\r\n    });\r\n  }\r\n\r\n  getChartData_Compare(marketSection) {\r\n    // marketSection = 'pid_sub_market'\r\n    if (this.canvasImage) {\r\n      this.canvasImage.marketSection = marketSection;\r\n    }\r\n    let nbhSection = $j(marketSection).find('input[type=\"hidden\"]');\r\n    let nbhSelected = $j(marketSection).find(\"label\");\r\n    let nbhCodes = \"\";\r\n    let nbhNames = {};\r\n    for (var i = 0; i < nbhSection.length; i++) {\r\n      let nbhSelect = $j(nbhSelected[i]).attr(\"showchart\");\r\n      if (nbhSelect != \"yes\") {\r\n        continue;\r\n      }\r\n      let nbhCode = $j(nbhSection[i]).attr(\"nbhcodes\");\r\n      let nbhName = JSON.parse($j(nbhSection[i]).attr(\"nbhnames\"));\r\n      nbhCodes = nbhCodes + \" \" + nbhCode;\r\n      nbhNames[nbhCode] = nbhName[nbhCode];\r\n    }\r\n    nbhCodes = nbhCodes.trim().split(\" \").join(\", \");\r\n    console.log(`${nbhCodes} & ${nbhNames}`);\r\n\r\n    var years = JSON.stringify(this.Years);\r\n    let month = this.Month;\r\n    console.log(nbhCodes);\r\n    var self = this;\r\n    let chartDataUrl = \"\";\r\n    switch (self.ChartTypeSelect.value) {\r\n      case \"dollar\":\r\n        if (pid_Data.siteurl.indexOf(\"pidhomes.ca\") >= 0) {\r\n          chartDataUrl =\r\n            pid_Data.siteurl +\r\n            \"/wp-content/themes/realhomes-child-3/db/chartData.php\";\r\n        } else {\r\n          chartDataUrl =\r\n            pid_Data.siteurl +\r\n            \"/wp-content/themes/realhomes-child-3/db/chartData.php\";\r\n        }\r\n        break;\r\n      case \"percentage\":\r\n        if (pid_Data.siteurl.indexOf(\"pidhomes.ca\") >= 0) {\r\n          chartDataUrl =\r\n            pid_Data.siteurl +\r\n            \"/wp-content/themes/realhomes-child-3/db/chartData_Percentage.php\";\r\n        } else {\r\n          chartDataUrl =\r\n            pid_Data.siteurl +\r\n            \"/wp-content/themes/realhomes-child-3/db/chartData_Percentage.php\";\r\n        }\r\n        break;\r\n    }\r\n\r\n    $j.ajax({\r\n      url: chartDataUrl,\r\n      method: \"get\",\r\n      data: { Neighborhood_IDs: nbhCodes, Years: years, Month: month },\r\n      dataType: \"JSON\",\r\n      success: function (res) {\r\n        res.forEach((dataSet) => {\r\n          let xPropertyType = dataSet[\"property_Type\"].trim();\r\n          let xData = {\r\n            label: nbhNames[dataSet[\"nbr_ID\"].trim()],\r\n            data: dataSet[\"nbr_Data\"],\r\n          };\r\n          // add dataset group by nbh\r\n          let yNeighborhood = self.neighborhoodNames[dataSet[\"nbr_ID\"].trim()];\r\n          let yData = {\r\n            label:\r\n              self.neighborhoodNames[dataSet[\"nbr_ID\"].trim()] +\r\n              \"_\" +\r\n              xPropertyType,\r\n            data: dataSet[\"nbr_Data\"],\r\n          };\r\n          switch (yNeighborhood) {\r\n            default:\r\n              self.chartDataSets_GroupByNbh.push([yNeighborhood, yData]);\r\n              break;\r\n          }\r\n          switch (xPropertyType) {\r\n            case \"All\":\r\n              self.chartDataSets_All.push(xData);\r\n              break;\r\n            case \"Detached\":\r\n              self.chartDataSets_Detached.push(xData);\r\n              break;\r\n            case \"Townhouse\":\r\n              self.chartDataSets_Townhouse.push(xData);\r\n              break;\r\n            case \"Apartment\":\r\n              self.chartDataSets_Apartment.push(xData);\r\n              break;\r\n          }\r\n        });\r\n        // self.chartDataSets = res;\r\n        // console.log(\"ajax\");\r\n        // console.log(self.chartDataSets_All);\r\n        let rads = self.PropertyTypeSelect;\r\n        let chkGroupByNbh = Array.from(self.PropertyTypeSelect).filter(\r\n          (rad) => rad.value == \"on\"\r\n        )[0].checked;\r\n        if (chkGroupByNbh) {\r\n          let chartDataSets = self.chartDataSets_GroupByNbh.map(\r\n            (nbhSet) => nbhSet[1]\r\n          );\r\n          self.configChart(chartDataSets, self.chartColors2);\r\n        } else {\r\n          for (var i = 0; i < rads.length; i++) {\r\n            let radValue = rads[i].value;\r\n            let radChecked = rads[i].checked;\r\n            if (radChecked) {\r\n              switch (radValue) {\r\n                case \"All\":\r\n                  self.configChart(self.chartDataSets_All, self.chartColors2);\r\n                  break;\r\n                case \"Detached\":\r\n                  self.configChart(\r\n                    self.chartDataSets_Detached,\r\n                    self.chartColors2\r\n                  );\r\n                  break;\r\n                case \"Townhouse\":\r\n                  self.configChart(\r\n                    self.chartDataSets_Townhouse,\r\n                    self.chartColors2\r\n                  );\r\n                  break;\r\n                case \"Apartment\":\r\n                  self.configChart(\r\n                    self.chartDataSets_Apartment,\r\n                    self.chartColors2\r\n                  );\r\n                  break;\r\n              }\r\n              break;\r\n            }\r\n          }\r\n        }\r\n\r\n        self.prepareCanvasSize(self.chartConfig.data.datasets.length);\r\n        self.drawChart(self.chartConfig);\r\n      },\r\n    });\r\n  }\r\n\r\n  drawChart(config) {\r\n    // console.log(ctx);\r\n    console.log(config);\r\n    //var ctx = $j(\"#lineChart\");\r\n    // change Chartjs default font family\r\n\r\n    var origAfterFit = Chart.Legend.prototype.afterFit;\r\n    Chart.Legend.prototype.afterFit = function () {\r\n      origAfterFit.call(this);\r\n      if (this.options && this.options.maxSize) {\r\n        var maxSize = this.options.maxSize;\r\n        if (maxSize.height !== undefined) {\r\n          this.height = Math.min(this.height, maxSize.height);\r\n          this.minSize.height = Math.min(this.minSize.height, this.height);\r\n        }\r\n        if (maxSize.width !== undefined) {\r\n          this.width = Math.min(this.width, maxSize.width);\r\n          this.minSize.width = Math.min(this.minSize.width, this.width);\r\n        }\r\n      }\r\n    };\r\n    Chart.defaults.global.defaultFontFamily = \"Montserrat\";\r\n    Chart.defaults.global.elements.line.fill = false;\r\n    this.pidChart = new Chart(this.ctx, config);\r\n    this.chartCanvas.hidden = false;\r\n    if ($j(`#${this.chartCanvasID}`).length > 0) {\r\n      if (this.canvasImage == null) {\r\n        this.canvasImage = new CanvasImage(\r\n          this.chartCanvasID,\r\n          this.marketSection\r\n        );\r\n      } else {\r\n        // reset socialShare config\r\n        this.canvasImage.socialShare.config = JSON.parse(\r\n          JSON.stringify(this.canvasImage.socialDefaultConfig)\r\n        );\r\n      }\r\n    }\r\n    this.drawCanvas = document.getElementById(this.chartCanvasID);\r\n  }\r\n}\r\n\r\nexport default pidChart;","class SubMarkets {\r\n  constructor(chartCanvasID, labelID) {\r\n    labelID = labelID.split(\" \").join(\"_\");\r\n    // remove special characters in the label, eg. (Surrey)\r\n    labelID = labelID.replace(\"(\", \"\").replace(\")\", \"\");\r\n    let btnCloseContainerHtml = `\r\n          <div id='pid_sub_market_${chartCanvasID}_${labelID}' class='pid_sub_market_hidden'>\r\n            <input class=\"pid_sub_market_close\" id=\"pid_sub_market_close_${chartCanvasID}_${labelID}\" type='button' value='X'>\r\n          </div>\r\n    `;\r\n    // this.btnClose = $j(\"#pid_sub_market_close_\" + chartCanvasID);\r\n    let btnCloseContainer = $j(btnCloseContainerHtml);\r\n    this.formContainer = $j(\"#pid_sub_markets_fieldset_\" + chartCanvasID);\r\n    this.formContainer.append(btnCloseContainer);\r\n    this.btnClose = $j(`#pid_sub_market_close_${chartCanvasID}_${labelID}`);\r\n    this.containerID = `#pid_sub_market_${chartCanvasID}_${labelID}`;\r\n    this.labelContainer = $j(this.containerID);\r\n    this.removeClass();\r\n    this.events();\r\n  }\r\n\r\n  // events:\r\n  events() {\r\n    this.btnClose.on(\"click\", () => {\r\n      console.log(\"clicked\");\r\n      let containerID = this.containerID;\r\n      let htmlLabels = $j(`${containerID} label`);\r\n      htmlLabels.remove();\r\n      let htmlInputs = $j(`${containerID} input[name='nbh_sub_market']`);\r\n      htmlInputs.remove();\r\n      // this.labelContainer.addClass(\"pid_sub_market_hidden\");\r\n      this.labelContainer.remove();\r\n    });\r\n  }\r\n\r\n  // methods:\r\n\r\n  removeClass() {\r\n    this.labelContainer.removeClass(\"pid_sub_market_hidden\");\r\n  }\r\n}\r\n\r\nexport default SubMarkets;","import pidChart from './PIDChart' ;\r\nimport WPDataTable from './CMA';\r\n\r\n$j(document).ready(() => {\r\n\r\nif ($j(\"#lineChart\").length > 0) {\r\n  //var chart = new pidChart(\"lineChart\");\r\n}\r\nif ($j(\"#line_chart_1\").length > 0) {\r\n  var chart1 = new pidChart(\"line_chart_1\");\r\n}\r\nif ($j(\"#line_chart_2\").length > 0) {\r\n  var chart2 = new pidChart(\"line_chart_2\");\r\n}\r\nif ($j(\"#line_chart_3\").length > 0) {\r\n  var chart3 = new pidChart(\"line_chart_3\");\r\n}\r\n\r\nconst tableHeadings = document.getElementsByClassName(\"pid_cma_listing_tables\");\r\nlet wpDTs = [];\r\nlet cmaType = \"\";\r\nfor (let tableHeading of tableHeadings) {\r\n  switch (tableHeading.id) {\r\n    case \"pid_cma_active_listings\":\r\n      cmaType = \"active\";\r\n      break;\r\n    case \"pid_cma_sold_listings\":\r\n      cmaType = \"sold\";\r\n      break;\r\n  }\r\n  // find heading's next sibling div, get the table inside the div\r\n  let tables = $j(tableHeading.nextElementSibling).find(\"table\");\r\n  // if tables exist, there will be only one table\r\n  if (tables.length > 0) {\r\n    let table = tables[0];\r\n    wpDTs.push(new WPDataTable(table, cmaType));\r\n  }\r\n}\r\n\r\n  resetGauge(1);\r\n  resetGauge(2);\r\n  resetGauge(3);\r\n  resetGauge(4);\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"sourceRoot":""}